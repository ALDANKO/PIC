//  Процедура печатает выбранный документ 
// Печатается та форма, которая была отпечатана при нажатии в документе кнопки
// печати по умолчанию
//
Процедура ДействияФормыДействиеПечать(Кнопка)

	Если ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	УниверсальныеМеханизмы.НапечататьДокументИзФормыСписка(ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока.ПолучитьОбъект());

КонецПроцедуры // ДействиеПечать()

// Процедура вызывается при выборе пункта подменю "Движения документа по регистрам" меню "Перейти".
// командной панели формы. Процедура отрабатывает печать движений документа по регистрам.
//
Процедура ДействияФормыДвиженияДокументаПоРегистрам(Кнопка)

	Если ЭтаФорма.ЭлементыФормы.Список.ТекущаяСтрока = Неопределено тогда
		Возврат
	КонецЕсли;

	РаботаСДиалогами.НапечататьДвиженияДокумента(ЭлементыФормы.Список.ТекущиеДанные.Ссылка);

КонецПроцедуры // ДействияФормыДвиженияДокументаПоРегистрам()

// Процедура вызывается при выборе пункта подменю "Структура подчиненности" меню "Перейти".
Процедура ДействияФормыСтруктураПодчиненностиДокумента(Кнопка)
	
	Если ЭлементыФормы.Список.ТекущиеДанные = Неопределено тогда
		Возврат
	КонецЕсли;
	
	РаботаСДиалогами.ПоказатьСтруктуруПодчиненностиДокумента(ЭлементыФормы.Список.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

Процедура СписокПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	//  Если ДанныеСтроки.СостояниеЗаказа=Перечисления.СостоянияЗаказаНаПроизводство.Подготовка И ДанныеСтроки.ПометкаУдаления=Ложь тогда
	//    ОформлениеСтроки.ЦветФона = WEBЦвета.СветлоНебесноГолубой;
	//ИначеЕсли ДанныеСтроки.СостояниеЗаказа=Перечисления.СостоянияЗаказаНаПроизводство.Заказ И ДанныеСтроки.ПометкаУдаления=Ложь тогда
	//    ОформлениеСтроки.ЦветФона = WEBЦвета.СветлоРозовый;
	//ИначеЕсли ДанныеСтроки.СостояниеЗаказа=Перечисления.СостоянияЗаказаНаПроизводство.ВРаботе  И ДанныеСтроки.ПометкаУдаления=Ложь тогда        
	//    ОформлениеСтроки.ЦветФона = ЦветаСтиля.ЦветФонаПоля;
	//ИначеЕсли ДанныеСтроки.ПометкаУдаления=Истина тогда        
	//    //ОформлениеСтроки.ЦветФона = ЦветаСтиля.ЦветТекстаПоля;
	//    ОформлениеСтроки.ЦветФона = WEBЦвета.СветлоСерый;
	//КонецЕсли;
КонецПроцедуры

Процедура ДействияФормыПечать(Кнопка)
	ТекущаяСтрока = ЭлементыФормы.Список.ТекущиеДанные;
	Если  не ТекущаяСтрока=неопределено  Тогда
		ЭтотОбъект = ТекущаяСтрока.Ссылка.ПолучитьОбъект();
		УниверсальныеМеханизмы.ОткрытьФормуВыбораПечатныхФормОбъекта(ЭтотОбъект, ЭтаФорма);
	КонецЕсли;
КонецПроцедуры

Процедура ДействияФормыАнализЗаданияНаПроизводство(Кнопка)
	ТекСтр=ЭлементыФормы.Список.ТекущиеДанные;
	Если ТекСтр=Неопределено тогда
		возврат
	КонецЕсли;
	ОткрытьШаблонДляАнализа(Ложь);
	//ШВ.ОткрытьМодально();

КонецПроцедуры


Процедура ОткрытьШаблонДляАнализа(МожноРедактировать=Ложь,ДляПроизводства=Ложь)
	ТекСтр=ЭлементыФормы.Список.ТекущиеДанные;
	ШаблонВвода = Обработки.ШаблонВводаЗаказаНаПроизводство.Создать();
	ШаблонВвода.МойДокумент			  = ТекСтр.Ссылка;
	ШаблонВвода.ДатаИсполнения		  = ТекСтр.Ссылка.ДатаИсполнения;
	ШаблонВвода.Дата				  = ТекСтр.Ссылка.Дата;
	ШаблонВвода.Склад				  = Справочники.Склады.НайтиПоКоду("000000001");
	ШаблонВвода.ДатаНачАнализаОтгрузкиПокупателям= ТекСтр.Ссылка.ДатаНачАнализаОтгрузкиПокупателям;
	ШаблонВвода.ДатаКонАнализаОтгрузкиПокупателям= ТекСтр.Ссылка.ДатаКонАнализаОтгрузкиПокупателям;
	ШаблонВвода.ДатаОсадки	 			= ТекСтр.Ссылка.ДатаОсадки;
	ШаблонВвода.ДатаПродажОсадкиНач		=	ТекСтр.Ссылка.ДатаПродажОсадкиНач;
	ШаблонВвода.ДатаПродажОсадкиКон		=	ТекСтр.Ссылка.ДатаПродажОсадкиКон;
	ШаблонВвода.ДатаBремяИнвентаризации	=	ТекСтр.Ссылка.ДатаBремяИнвентаризации;
	ШаблонВвода.ДатаНачАнализаЗаказов	=	ТекСтр.Ссылка.ДатаНачАнализаЗаказов;
	ШаблонВвода.ДатаКонАнализаЗаказов	=	ТекСтр.Ссылка.ДатаКонАнализаЗаказов;
	ШаблонВвода.МожноРедактировать		=   МожноРедактировать;
	ШВ=ШаблонВвода.ПолучитьФорму("Форма");
	ШВ.Открыть();
КонецПроцедуры


Процедура ДействияФормыАнализДляПроизводства(Кнопка)
	ТекСтр=ЭлементыФормы.Список.ТекущиеДанные;
	Если ТекСтр=Неопределено тогда
		возврат
	КонецЕсли;
	ОткрытьШаблонДляАнализа(Ложь,Истина);
КонецПроцедуры

